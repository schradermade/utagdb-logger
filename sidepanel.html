<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Jarvis</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        min-width: 340px;
        background: #1f1f1f;
        color: #e6e6e6;
        overflow: hidden;
        scrollbar-color: #2b2b2b #141414;
        scrollbar-width: thin;
        scrollbar-gutter: stable;
      }
      html {
        overflow: hidden;
        scrollbar-color: #2b2b2b #141414;
        scrollbar-width: thin;
        scrollbar-gutter: stable;
      }
      body::-webkit-scrollbar {
        width: 10px;
      }
      body::-webkit-scrollbar-track {
        background: #141414;
      }
      body::-webkit-scrollbar-thumb {
        background: #2b2b2b;
        border-radius: 8px;
        border: 2px solid #141414;
      }
      html::-webkit-scrollbar {
        width: 10px;
      }
      html::-webkit-scrollbar-track {
        background: #141414;
      }
      html::-webkit-scrollbar-thumb {
        background: #2b2b2b;
        border-radius: 8px;
        border: 2px solid #141414;
      }
      :root {
        --header-height: 64px;
        --feature-shell-height: 62px;
        --header-gap: 12px;
      }
      .header {
        background: #121212;
        padding: 8px 16px;
        margin: 0;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
        height: var(--header-height);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .app-brand {
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        gap: 1px;
        margin-right: 6px;
      }
      .app-badge {
        width: 44px;
        height: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .app-badge img {
        width: 42px;
        height: 42px;
      }
      .app-name {
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 1.6px;
        color: #dcdcdc;
      }
      .top-tabs {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        width: 100%;
      }
      .guide-view {
        display: none;
        flex-direction: column;
        gap: 16px;
        padding-top: 8px;
        padding-bottom: 96px;
      }
      .guide-view.active {
        display: flex;
      }
      .guide-hero {
        border: 1px solid #262626;
        background: #151515;
        border-radius: 14px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .guide-title {
        font-size: 18px;
        font-weight: 700;
        color: #e6e6e6;
      }
      .guide-subtitle {
        font-size: 12px;
        color: #b6b6b6;
        line-height: 1.5;
      }
      .guide-grid {
        display: grid;
        gap: 12px;
      }
      .guide-block {
        border: 1px solid #262626;
        background: #151515;
        border-radius: 12px;
        padding: 14px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .guide-block-title {
        font-size: 11px;
        font-weight: 600;
        color: #9c9c9c;
        text-transform: uppercase;
        letter-spacing: 0.6px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .guide-section-title {
        font-size: 11px;
        font-weight: 600;
        color: #9c9c9c;
        text-transform: uppercase;
        letter-spacing: 0.6px;
        margin-top: 4px;
        margin-bottom: 4px;
      }
      .guide-icon {
        font-size: 12px;
        line-height: 1;
      }
      .guide-indicator {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        border: 1px solid #c9c9c9;
        display: inline-block;
        margin: 0 4px;
        vertical-align: middle;
      }
      .guide-indicator.is-on {
        border-color: #64c47a;
        background: #64c47a;
        box-shadow: 0 0 4px rgba(100, 196, 122, 0.3);
      }
      .guide-steps {
        display: grid;
        gap: 8px;
        font-size: 12px;
        color: #d0d0d0;
      }
      .guide-step {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 8px;
        align-items: start;
      }
      .guide-step-number {
        font-size: 12px;
        font-weight: 600;
        color: #8f8f8f;
      }
      .guide-note {
        font-size: 11px;
        color: #9b9b9b;
        line-height: 1.4;
      }
      .guide-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .guide-tag {
        font-size: 11px;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid #2f2f2f;
        background: #141414;
        color: #cfcfcf;
      }
      .recent-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .recent-item {
        border: 1px solid #262626;
        background: #151515;
        border-radius: 12px;
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .recent-title {
        font-size: 13px;
        font-weight: 600;
        color: #e6e6e6;
        word-break: break-all;
      }
      .recent-meta {
        font-size: 11px;
        color: #9b9b9b;
        display: flex;
        flex-wrap: wrap;
        gap: 6px 12px;
      }
      .recent-url {
        font-size: 11px;
        color: #d6d6d6;
        background: #1b1b1b;
        border: 1px solid #2b2b2b;
        border-radius: 6px;
        padding: 6px 8px;
        word-break: break-all;
        font-family: SFMono-Regular, Menlo, Consolas, 'Liberation Mono',
          monospace;
      }
      .recent-url-list {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .recent-url-title {
        font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
        font-size: 10px;
        letter-spacing: 0.6px;
        text-transform: uppercase;
        color: #9b9b9b;
        margin-bottom: 6px;
      }
      .recent-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .recent-tag {
        font-size: 11px;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid #2f2f2f;
        background: #141414;
        color: #cfcfcf;
      }
      .recent-actions .storage-button {
        background: linear-gradient(135deg, #1b2a1f, #0f1a13);
        border-color: #3b7a4d;
        color: #e9f7ef;
        padding: 8px 14px;
        font-size: 13px;
        font-weight: 700;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      }
      .recent-actions .storage-button:hover {
        border-color: #53a76b;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
      }
      .top-tab {
        border: 1px solid #2a2a2a;
        background: #171717;
        color: #d9d9d9;
        border-radius: 8px;
        padding: 8px 10px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }
      .top-tab.active {
        border-color: #3b7a4d;
        background: #0f1712;
        color: #e3f7ea;
      }
      .content {
        padding: calc(var(--header-height) + var(--header-gap) + 8px) 16px 16px;
        height: 100vh;
        overflow-y: auto;
        overflow-x: hidden;
        scrollbar-color: #2b2b2b #141414;
        scrollbar-width: thin;
      }
      #feature-logger {
        padding-bottom: 96px;
      }
      #tools-view {
        padding-bottom: 28px;
      }
      #tools-view {
        padding-top: calc(
          var(--feature-shell-height) + var(--header-gap) + 12px
        );
      }
      .feature-shell {
        margin: 0;
        padding: 8px 16px;
        border-radius: 0;
        border-top: 0;
        border-bottom: 1px solid #262626;
        border-left: 0;
        border-right: 0;
        background: #171717;
        position: fixed;
        top: calc(var(--header-height) + var(--header-gap));
        left: 0;
        right: 0;
        z-index: 9;
        height: var(--feature-shell-height);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .feature-shell-title {
        font-size: 11px;
        letter-spacing: 0.8px;
        text-transform: uppercase;
        color: #b6b6b6;
        margin-bottom: 6px;
      }
      .feature-nav {
        display: grid;
        grid-auto-flow: column;
        grid-auto-columns: minmax(64px, 1fr);
        gap: 6px;
        overflow-x: auto;
        overflow-y: hidden;
        padding-bottom: 4px;
        scroll-snap-type: x proximity;
        scrollbar-width: none;
        -ms-overflow-style: none;
        width: 100%;
      }
      .feature-nav::-webkit-scrollbar {
        display: none;
      }
      .feature-card {
        border: 1px solid #262626;
        background: #121212;
        color: #cfcfcf;
        padding: 8px 6px;
        border-radius: 10px;
        text-align: center;
        cursor: pointer;
        min-height: 54px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        transition:
          border-color 0.2s ease,
          background 0.2s ease,
          color 0.2s ease;
        align-items: center;
        justify-content: center;
        scroll-snap-align: start;
      }
      .feature-indicator {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        border: 1px solid #2f2f2f;
        background: transparent;
        display: inline-block;
      }
      .feature-indicator.is-on {
        border-color: #64c47a;
        background: #64c47a;
        box-shadow: 0 0 4px rgba(100, 196, 122, 0.3);
      }
      .feature-card:hover {
        border-color: #343434;
        background: #181818;
      }
      .feature-card:active {
        transform: translateY(1px);
      }
      .feature-card.active {
        border-color: #3b7a4d;
        background: #0f1712;
        color: #e3f7ea;
      }
      .feature-card:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .feature-scroll {
        border: 1px solid #2a2a2a;
        background: #121212;
        color: #e6e6e6;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        flex: 0 0 auto;
      }
      .feature-scroll:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }
      .feature-title {
        font-size: 12px;
        font-weight: 500;
        line-height: 1.2;
        text-transform: none;
        letter-spacing: 0.6px;
        color: #e3e3e3;
        opacity: 0.85;
      }
      .feature-subtitle {
        display: none;
      }
      .feature-section {
        display: none;
      }
      .feature-section.active {
        display: block;
      }
      #feature-consent {
        padding-bottom: 96px;
      }
      .consent-controls {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 10px;
      }
      #feature-consent .consent-controls .storage-button {
        margin-left: auto;
      }
      #feature-iq {
        padding-bottom: 96px;
      }
      #recent-view {
        padding-bottom: 96px;
      }
      #feature-iq > * + * {
        margin-top: 16px;
      }
      #feature-iq .status {
        margin-top: 0;
      }
      .storage-controls {
        display: flex;
        gap: 8px;
        align-items: center;
        margin-bottom: 10px;
      }
      .storage-button {
        border: 1px solid #2a2a2a;
        background: #1a1a1a;
        color: #e6e6e6;
        padding: 6px 10px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
      }
      .storage-button:active {
        transform: translateY(1px);
      }
      .storage-button.is-loading {
        opacity: 0.8;
        pointer-events: none;
      }
      .storage-button .btn-spinner {
        display: none;
        width: 12px;
        height: 12px;
        border: 2px solid rgba(255, 255, 255, 0.2);
        border-top-color: #e9f7ef;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin-left: 8px;
        vertical-align: middle;
      }
      .storage-button.is-loading .btn-spinner {
        display: inline-block;
      }
      .storage-button.is-loading .btn-label {
        opacity: 0.8;
      }
      #export-view .storage-controls {
        gap: 10px;
      }
      #export-view .storage-button {
        background: linear-gradient(135deg, #1b2a1f, #0f1a13);
        border-color: #3b7a4d;
        color: #e9f7ef;
        padding: 8px 14px;
        font-size: 13px;
        font-weight: 700;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      }
      #export-view .storage-button:hover {
        border-color: #53a76b;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
      }
      #feature-consent .storage-button,
      #feature-iq .storage-button,
      #feature-logger .storage-button {
        background: linear-gradient(135deg, #1b2a1f, #0f1a13);
        border-color: #3b7a4d;
        color: #e9f7ef;
        padding: 8px 14px;
        font-size: 13px;
        font-weight: 700;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      }
      #feature-consent .storage-button:hover,
      #feature-iq .storage-button:hover,
      #feature-logger .storage-button:hover {
        border-color: #53a76b;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
      }
      .storage-search {
        flex: 1 1 auto;
      }
      .storage-search input {
        width: 100%;
        padding: 6px 8px;
        font-size: 12px;
        background: #1a1a1a;
        color: #e6e6e6;
        border: 1px solid #2a2a2a;
        border-radius: 8px;
      }
      .iq-form {
        display: flex;
        flex-direction: column;
        gap: 0;
        margin-bottom: 0;
      }
      .iq-recent-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .iq-recent-item {
        border: 1px solid #2a2a2a;
        background: #151515;
        border-radius: 10px;
        padding: 8px 10px;
        display: flex;
        flex-direction: column;
        gap: 4px;
        color: #e6e6e6;
        text-align: left;
        cursor: pointer;
      }
      .iq-recent-item:hover {
        border-color: #3b7a4d;
        background: #101a14;
      }
      .iq-recent-title {
        font-size: 12px;
        font-weight: 600;
        color: #e6e6e6;
        word-break: break-all;
      }
      .iq-recent-meta {
        font-size: 11px;
        color: #9b9b9b;
        word-break: break-all;
      }
      .iq-recent-empty {
        font-size: 11px;
        color: #8f8f8f;
      }
      .iq-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .panel-section {
        border: 1px solid #262626;
        background: #151515;
        border-radius: 12px;
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .panel-section + .panel-section {
        margin-top: 16px;
      }
      .logger-preview-section {
        margin-top: 16px;
      }
      .panel-section-title {
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.4px;
        color: #e3e3e3;
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .panel-section-title.has-toggle {
        justify-content: space-between;
      }
      .panel-section-title-text {
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }
      .panel-section-title span {
        font-size: 11px;
        font-weight: 500;
        color: #9c9c9c;
        text-transform: uppercase;
        letter-spacing: 0.6px;
      }
      .logger-steps {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
        font-size: 12px;
        color: #cfcfcf;
      }
      .logger-step {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .logger-step-inline {
        display: flex;
        align-items: center;
      }
      .logger-step-subaction {
        padding-left: 18px;
      }
      .logger-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
      }
      .logger-cookie-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #505050;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.4);
      }
      .logger-cookie-indicator.is-on {
        background: #35b86b;
        box-shadow: 0 0 6px rgba(53, 184, 107, 0.7);
      }
      .logger-cookie-status {
        font-size: 11px;
        color: #9c9c9c;
      }
      .logger-step-number {
        color: #9c9c9c;
        font-weight: 600;
        margin-right: 6px;
      }
      .panel-section-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .panel-section-body.is-collapsed {
        display: none;
      }
      .section-toggle {
        border: 1px solid #2f2f2f;
        background: #171717;
        color: #cfcfcf;
        border-radius: 8px;
        width: 26px;
        height: 26px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        padding: 0;
      }
      .section-toggle-icon {
        display: inline-flex;
        transition: transform 0.2s ease;
        font-size: 14px;
        line-height: 1;
      }
      .section-toggle[aria-expanded='false'] .section-toggle-icon {
        transform: rotate(-90deg);
      }
      .logger-status-hidden {
        display: none;
      }
      .iq-includes {
        display: flex;
        flex-wrap: wrap;
        gap: 6px 12px;
        font-size: 12px;
        color: #cfcfcf;
      }
      .iq-preview {
        background: transparent;
        border: 0;
        border-radius: 0;
        padding: 0;
        max-height: calc(100vh - 340px);
        overflow: auto;
      }
      .iq-meta {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: 6px;
        margin-bottom: 12px;
      }
      .iq-meta-url {
        background: #1b1b1b;
        border: 1px solid #2b2b2b;
        border-radius: 6px;
        padding: 6px 8px;
        font-size: 12px;
        color: #d6d6d6;
        word-break: break-all;
        font-family: SFMono-Regular, Menlo, Consolas, 'Liberation Mono',
          monospace;
      }
      .iq-meta-time {
        font-size: 11px;
        color: #9b9b9b;
      }
      .iq-preview-shell {
        border: 1px solid #2b2b2b;
        background: #1b1b1b;
        border-radius: 12px;
        padding: 12px;
        width: 100%;
        box-sizing: border-box;
      }
      .iq-preview-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }
      .logger-toolbar-actions {
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .iq-preview-label {
        font-size: 12px;
        color: #cfcfcf;
        text-transform: lowercase;
        letter-spacing: 0.3px;
      }
      .logger-toggle {
        border: 1px solid #2f2f2f;
        background: #151515;
        color: #cfcfcf;
        border-radius: 999px;
        padding: 4px 10px;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
      }
      .logger-toggle:disabled {
        opacity: 0.5;
        cursor: default;
      }
      .iq-copy {
        background: transparent;
        border: 0;
        color: #e6e6e6;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        font-size: 12px;
        padding: 4px 6px;
        border-radius: 8px;
      }
      .iq-copy:hover {
        background: rgba(255, 255, 255, 0.06);
      }
      .iq-copy .iq-check {
        display: none;
        width: 14px;
        height: 10px;
        align-items: center;
        justify-content: center;
        color: #e6e6e6;
        line-height: 1;
      }
      .iq-copy .iq-check svg {
        width: 14px;
        height: 10px;
        display: block;
      }
      .iq-copy.copied .iq-copy-icon {
        display: none;
      }
      .iq-copy.copied .iq-check {
        display: inline-flex;
      }
      .iq-copy-icon {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .iq-copy-icon svg {
        width: 16px;
        height: 16px;
        display: block;
      }
      .storage-group {
        margin-top: 12px;
      }
      #feature-iq .storage-group {
        margin-top: 0;
      }
      #iq-meta-section + .storage-group {
        margin-top: 16px;
      }
      .storage-header {
        display: flex;
        justify-content: space-between;
        font-size: 11px;
        letter-spacing: 0.6px;
        text-transform: uppercase;
        color: #b6b6b6;
        margin-bottom: 6px;
      }
      #export-view .storage-header {
        align-items: center;
        margin-bottom: 0;
      }
      #export-view .storage-header .storage-button {
        margin-top: 16px;
      }
      #export-view .storage-group {
        margin-top: 8px;
      }
      .storage-list {
        border: 1px solid #262626;
        background: #121212;
        border-radius: 10px;
        padding: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .storage-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .storage-key {
        font-size: 12px;
        color: #e3e3e3;
      }
      .storage-value {
        font-size: 11px;
        color: #bdbdbd;
        white-space: pre-wrap;
        word-break: break-word;
        font-family: SFMono-Regular, Menlo, Consolas, 'Liberation Mono',
          monospace;
      }
      .export-preview {
        background: #1b1b1b;
        border: 1px solid #2b2b2b;
        border-radius: 6px;
        padding: 10px;
        max-height: calc(100vh - 340px);
        overflow: auto;
      }
      .logger-preview {
        background: #1b1b1b;
        border: 1px solid #2b2b2b;
        border-radius: 6px;
        padding: 10px;
        max-height: clamp(220px, calc(100vh - 460px), 480px);
        overflow: auto;
      }
      .preview-line {
        display: block;
        white-space: pre-wrap;
        word-break: break-word;
      }
      .preview-line-number,
      .preview-line-sep {
        user-select: none;
        color: #7a7a7a;
      }
      .export-options {
        display: flex;
        flex-wrap: wrap;
        gap: 8px 12px;
        align-items: center;
        margin: 0;
        font-size: 12px;
        color: #cfcfcf;
      }
      .export-sections {
        display: grid;
        gap: 16px;
        margin-top: 10px;
        margin-bottom: 14px;
      }
      .export-section {
        gap: 16px;
        padding: 16px;
      }
      .export-option-group {
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 100%;
      }
      .export-option-group + .export-option-group {
        margin-top: 8px;
      }
      .export-subtitle {
        font-size: 11px;
        font-weight: 600;
        color: #9c9c9c;
        text-transform: uppercase;
        letter-spacing: 0.6px;
      }
      .export-option-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 8px 12px;
      }
      .export-status-inline {
        font-size: 12px;
        color: #b6b6b6;
        margin-top: -6px;
        margin-bottom: 0;
        padding-left: 6px;
        line-height: 1.2;
      }
      .export-actions {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .export-actions .storage-controls {
        margin-bottom: 0;
      }
      .export-status {
        margin-top: 0;
      }
      .export-status.is-hidden {
        display: none;
      }
      .export-option {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .export-option input[type='checkbox'] {
        appearance: none;
        width: 14px;
        height: 14px;
        border-radius: 4px;
        border: 1px solid #3a3a3a;
        background: #111;
        display: inline-grid;
        place-content: center;
        cursor: pointer;
      }
      .export-option input[type='checkbox']::after {
        content: '';
        width: 8px;
        height: 8px;
        border-radius: 2px;
        background: #7bd88f;
        transform: scale(0);
        transition: transform 0.12s ease;
      }
      .export-option input[type='checkbox']:checked {
        border-color: #3b7a4d;
        background: #0f1712;
      }
      .export-option input[type='checkbox']:checked::after {
        transform: scale(1);
      }
      .export-size {
        font-size: 12px;
        color: #b6b6b6;
        margin-top: 4px;
        margin-bottom: 6px;
        padding-left: 6px;
        line-height: 1.2;
      }
      #consent-signal-list {
        gap: 12px;
      }
      #consent-signal-list .storage-value {
        background: #1c1c1c;
        border: 1px solid #2a2a2a;
        border-radius: 3px;
        padding: 6px 8px;
      }
      .storage-empty {
        font-size: 11px;
        color: #8f8f8f;
      }
      .consent-summary {
        border: 1px solid #262626;
        background: #121212;
        border-radius: 10px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .consent-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        font-size: 12px;
        color: #cfcfcf;
      }
      .consent-row-group {
        display: flex;
        flex-direction: column;
        gap: 2px;
        padding: 8px;
        border-radius: 8px;
        background: #161616;
        border: 1px solid #232323;
      }
      .consent-row-group .consent-subitems {
        margin-left: 16px;
        padding-left: 8px;
        border-left: 2px solid #2a2a2a;
        margin-top: 4px;
      }
      .consent-pill {
        padding: 3px 8px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.4px;
        background: #1a1a1a;
        border: 1px solid #2a2a2a;
        color: #f0f0f0;
      }
      .consent-pill.dim {
        border-color: #3a3a3a;
        color: #bdbdbd;
        background: #131313;
      }
      .consent-pill-plain {
        display: inline-flex;
        border: none;
        background: transparent;
        padding: 0;
        letter-spacing: 0.2px;
        text-transform: none;
      }
      .consent-pill.ok {
        border-color: #3b7a4d;
        background: #0f1712;
      }
      .consent-pill.category-ok {
        border-color: #8a6a1f;
        background: #1a1406;
      }
      .consent-pill.warn {
        border-color: #80662b;
        background: #1a1408;
      }
      .consent-pill.bad {
        border-color: #7a3b3b;
        background: #1a0f0f;
      }
      .consent-pill-multi {
        display: inline-flex;
        border-radius: 999px;
        overflow: hidden;
        border: 1px solid #2a2a2a;
        background: #1a1a1a;
      }
      .consent-segment {
        padding: 3px 8px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.4px;
        border-right: 1px solid #2a2a2a;
        transition: all 0.15s ease;
      }
      .consent-segment:last-child {
        border-right: none;
      }
      .consent-segment.inactive {
        color: #555;
        background: #0f0f0f;
      }
      .consent-segment.active.ok {
        color: #f0f0f0;
        background: #0f1712;
        border-color: #3b7a4d;
      }
      .consent-segment.active.warn {
        color: #f0f0f0;
        background: #1a1408;
        border-color: #80662b;
      }
      .consent-segment.active.bad {
        color: #f0f0f0;
        background: #1a0f0f;
        border-color: #7a3b3b;
      }
      .consent-subitems {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-left: 10px;
        align-items: flex-start;
      }
      .consent-meta {
        font-size: 11px;
        color: #9b9b9b;
        margin-top: 8px;
      }
      .consent-meta-header {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .consent-meta-label {
        text-transform: uppercase;
        letter-spacing: 0.6px;
        font-size: 11px;
        color: #b6b6b6;
      }
      .consent-meta-url {
        margin-top: 4px;
        padding: 6px 8px;
        border-radius: 6px;
        background: #1a1a1a;
        border: 1px solid #2a2a2a;
        color: #d9d9d9;
        font-size: 11px;
        word-break: break-all;
        font-family: SFMono-Regular, Menlo, Consolas, 'Liberation Mono',
          monospace;
      }
      .consent-meta-time {
        font-size: 11px;
        color: #8f8f8f;
        text-transform: none;
        letter-spacing: 0;
      }
      .signal-helper {
        font-size: 10px;
        color: #9a9a9a;
        line-height: 1.4;
      }
      .title {
        font-size: 13px;
        font-weight: 600;
        margin: 0;
        color: #f1f1f1;
        letter-spacing: 0.6px;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .title-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        color: #ffffff;
        font-size: 13px;
        line-height: 1;
        filter: brightness(1.25) contrast(1.1);
      }
      .field {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 14px;
        font-size: 13px;
      }
      .field.hidden {
        display: none;
      }
      .field-error {
        font-size: 12px;
        color: #ff6b6b;
      }
      .field-error.hidden {
        display: none;
      }
      .field input {
        padding: 6px 8px;
        font-size: 14px;
        background: #2a2a2a;
        color: #e6e6e6;
        border: 1px solid #3a3a3a;
      }
      .record {
        width: fit-content;
        margin: 0 auto;
        padding-left: 28px;
        padding-right: 28px;
        padding: 10px 12px;
        border-radius: 20px;
        border: 1px solid #3a3a3a;
        background: #2b2b2b;
        color: #d0d0d0;
        font-weight: 700;
        letter-spacing: 0.3px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      .record.recording {
        background: #e53935;
        border-color: #c62828;
        color: #fff;
        animation: slowblink 1.8s ease-in-out infinite;
      }
      .record .icon {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #6b6b6b;
        display: inline-block;
      }
      .record .spinner {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.4);
        border-top-color: #ffffff;
        display: none;
        animation: spin 0.8s linear infinite;
      }
      .record.recording .icon {
        border-radius: 2px;
        width: 12px;
        height: 12px;
        background: #ffebee;
      }
      .record.cooldown .icon {
        display: none;
      }
      .record.cooldown .spinner {
        display: inline-block;
      }
      .record.cooldown,
      .record:disabled {
        cursor: not-allowed;
        opacity: 0.65;
        animation: none;
        transform: none;
      }
      .record:not(:disabled):not(.cooldown):hover,
      .record:not(:disabled):not(.cooldown):focus-visible {
        border-color: #53a76b;
        box-shadow: 0 0 0 2px rgba(83, 167, 107, 0.35);
        outline: none;
      }
      .record:active {
        transform: scale(0.96);
      }
      .status {
        margin-top: 14px;
        font-size: 13px;
        line-height: 1.4;
      }
      .destination {
        margin-top: 14px;
        font-size: 14px;
        color: #7bd88f;
      }
      .destination.hidden {
        display: none;
      }
      .saving-value {
        margin-top: 4px;
        background: #2a2a2a;
        padding: 6px 8px;
        border-radius: 6px;
        color: #e6e6e6;
        word-break: break-all;
      }
      .completed-label {
        margin-top: 8px;
      }
      .completed-title {
        margin-bottom: 8px;
        font-weight: 600;
        color: #7bd88f;
      }
      .completed-block {
        padding-top: 8px;
        border-top: 1px solid #3a3a3a;
      }
      @keyframes slowblink {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.55;
        }
        100% {
          opacity: 1;
        }
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="app-brand">
        <div class="app-badge">
          <img src="jarvis-robot.png" alt="Jarvis" />
        </div>
        <div class="app-name">JARVIS</div>
      </div>
      <div class="top-tabs" role="tablist" aria-label="Primary">
        <button
          class="top-tab active"
          type="button"
          data-top-tab="guide"
          aria-selected="true"
        >
          <span class="title-icon" aria-hidden="true">üìò</span>
          <span>Guide</span>
        </button>
        <button
          class="top-tab"
          type="button"
          data-top-tab="tools"
          aria-selected="false"
        >
          <span class="title-icon" aria-hidden="true">üõ†Ô∏è</span>
          <span>Tools</span>
        </button>
        <button
          class="top-tab"
          type="button"
          data-top-tab="recent"
          aria-selected="false"
        >
          <span class="title-icon" aria-hidden="true">üóÇÔ∏è</span>
          <span>Recent Exports</span>
        </button>
        <button
          class="top-tab"
          type="button"
          data-top-tab="export"
          aria-selected="false"
        >
          <span class="title-icon" aria-hidden="true">üì§</span>
          <span>Export</span>
        </button>
      </div>
    </div>
    <div class="content">
      <div
        id="guide-view"
        class="guide-view active"
        role="tabpanel"
        aria-hidden="false"
      >
        <div class="guide-hero">
          <div class="guide-title">Jarvis Workflow Guide</div>
          <div class="guide-subtitle">
            Use only the tools you need. Each section is optional, and your case
            file can include any combination of logs, consent data, and iQ
            profile details.
          </div>
        </div>
        <div class="guide-grid">
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">‚ö°</span>Quick Start
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">1.</span>
                <span
                  >Open the site you want to debug and keep that tab
                  active.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">2.</span>
                <span
                  >Generate the data you want (logs, consent snapshots, or iQ
                  profile). New data is picked up automatically for
                  export.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">3.</span>
                <span
                  >Use Export Preview to confirm what will be included.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">4.</span>
                <span>Export when you‚Äôre ready.</span>
              </div>
            </div>
          </div>
          <div class="guide-section-title">Tools</div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üß™</span>utag.DB Logs
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">1.</span>
                <span>Open the site tab you want to test.</span>
              </div>
              <div class="guide-step">
                <span class="guide-step-number">2.</span>
                <span
                  >Enable the utagdb cookie if your site requires it to emit
                  utag.DB logs.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">3.</span>
                <span
                  >Click Start Recording Logs, run your flow, then stop
                  recording.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">4.</span>
                <span>Use Logs Preview to validate before exporting.</span>
              </div>
            </div>
          </div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üõ°Ô∏è</span>Consent
              Monitor
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">1.</span>
                <span
                  >Open the target page and interact with the consent
                  banner.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">2.</span>
                <span>Click Refresh to capture a snapshot.</span>
              </div>
              <div class="guide-step">
                <span class="guide-step-number">3.</span>
                <span
                  >Confirm the consent state, GPC, and signals in the
                  summary.</span
                >
              </div>
            </div>
          </div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üßæ</span>iQ Profile
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">1.</span>
                <span
                  >Enter account/profile and authenticate to get a token.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">2.</span>
                <span
                  >Select which data to include, then fetch the profile.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">3.</span>
                <span>Review the Profile Preview before exporting.</span>
              </div>
            </div>
          </div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üì¶</span>Export
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">1.</span>
                <span>Use Include/Redact options to shape the case file.</span>
              </div>
              <div class="guide-step">
                <span class="guide-step-number">2.</span>
                <span>Refresh Preview to verify what will be exported.</span>
              </div>
              <div class="guide-step">
                <span class="guide-step-number">3.</span>
                <span>Export Case File when the preview looks correct.</span>
              </div>
            </div>
          </div>
          <div class="guide-section-title">Help &amp; Tips</div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üü¢</span>Export
              Indicators
            </div>
            <div class="guide-note">
              Green dots under feature cards mean data from that section is
              included in your export. Hollow dots mean the export does not yet
              contain data from that feature.
            </div>
            <div class="guide-note">
              Example:
              <span class="guide-indicator is-on" aria-hidden="true"></span
              >ready
              <span class="guide-indicator" aria-hidden="true"></span>empty
            </div>
            <div class="guide-tags">
              <span class="guide-tag">utag.DB Logs</span>
              <span class="guide-tag">Consent Monitor</span>
              <span class="guide-tag">iQ Profile</span>
            </div>
          </div>
          <div class="guide-block">
            <div class="guide-block-title">
              <span class="guide-icon" aria-hidden="true">üõ†Ô∏è</span>Tips &
              Troubleshooting
            </div>
            <div class="guide-steps">
              <div class="guide-step">
                <span class="guide-step-number">‚Ä¢</span>
                <span
                  >If logs are empty, ensure the utagdb cookie is enabled.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">‚Ä¢</span>
                <span
                  >Use Export Preview to confirm data before downloading.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">‚Ä¢</span>
                <span
                  >Recent Exports stores metadata only, not full files.</span
                >
              </div>
              <div class="guide-step">
                <span class="guide-step-number">‚Ä¢</span>
                <span
                  >Work in the same active tab; each tab maintains its own
                  session.</span
                >
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="tools-view">
        <div class="feature-shell">
          <button
            class="feature-scroll"
            type="button"
            data-scroll="left"
            aria-label="Scroll feature cards left"
          >
            ‚Äπ
          </button>
          <div class="feature-nav" role="tablist" aria-label="Features">
            <button
              class="feature-card active"
              type="button"
              data-feature="logger"
              aria-selected="true"
            >
              <span class="feature-title">utag.DB Logs</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="consent"
              aria-selected="false"
            >
              <span class="feature-title">Consent Monitor</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="iq"
              aria-selected="false"
            >
              <span class="feature-title">iQ Profile</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="session"
              aria-selected="false"
            >
              <span class="feature-title">Session Viewer</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="rules"
              aria-selected="false"
            >
              <span class="feature-title">Load Rules</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="payloads"
              aria-selected="false"
            >
              <span class="feature-title">Payload Lab</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="network"
              aria-selected="false"
            >
              <span class="feature-title">Network Watch</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="events"
              aria-selected="false"
            >
              <span class="feature-title">Event Stream</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="storage"
              aria-selected="false"
            >
              <span class="feature-title">Storage Map</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
            <button
              class="feature-card"
              type="button"
              data-feature="qa"
              aria-selected="false"
            >
              <span class="feature-title">QA Checklist</span>
              <span class="feature-indicator" aria-hidden="true"></span>
            </button>
          </div>
          <button
            class="feature-scroll"
            type="button"
            data-scroll="right"
            aria-label="Scroll feature cards right"
          >
            ‚Ä∫
          </button>
        </div>

        <section
          id="feature-logger"
          class="feature-section active"
          role="tabpanel"
        >
          <div class="panel-section">
            <div class="panel-section-title">
              <span>Session</span><span>Logger</span>
            </div>
            <div class="logger-steps">
              <div class="logger-step">
                <div class="logger-step-inline">
                  <span class="logger-step-number">1.</span>Enable utagdb
                  Cookie.
                </div>
                <div class="logger-step-subaction">
                  <div class="logger-actions">
                    <span
                      id="utagdb-cookie-indicator"
                      class="logger-cookie-indicator"
                      aria-hidden="true"
                    ></span>
                    <button
                      id="utagdb-cookie"
                      class="storage-button"
                      type="button"
                    >
                      Enable utagdb Cookie
                    </button>
                    <span
                      id="utagdb-cookie-status"
                      class="logger-cookie-status"
                    ></span>
                  </div>
                </div>
              </div>
              <div>
                <span class="logger-step-number">2.</span>Click Start Recording
                Logs.
              </div>
              <div>
                <span class="logger-step-number">3.</span>Trigger utag.DB logs
                on the page.
              </div>
              <div>
                <span class="logger-step-number">4.</span>Click stop when done,
                then check Logs Preview or Export.
              </div>
            </div>
            <button id="record" class="record" type="button">
              <span class="icon" aria-hidden="true"></span>
              <span class="spinner" aria-hidden="true"></span>
              <span id="record-label">Start Recording Logs</span>
            </button>
          </div>
          <div class="logger-status-hidden">
            <div id="destination" class="destination hidden">
              <div>Stored in:</div>
              <div id="destination-value" class="saving-value"></div>
            </div>
            <div id="saving" class="destination hidden">
              <div>Stored session:</div>
              <div id="saving-value" class="saving-value"></div>
            </div>
            <div id="count" class="destination hidden">
              <div>Logs captured:</div>
              <div id="count-value" class="saving-value"></div>
            </div>
            <div id="completed" class="destination hidden completed-block">
              <div class="completed-title">SESSION COMPLETED</div>
              <div>Stored in:</div>
              <div id="completed-sent" class="saving-value"></div>
              <div class="completed-label">Stored session:</div>
              <div id="completed-saved" class="saving-value"></div>
              <div class="completed-label">Logs captured:</div>
              <div id="completed-count" class="saving-value"></div>
            </div>
            <div id="status" class="status"></div>
          </div>
          <div class="logger-preview-section">
            <div class="storage-group">
              <div class="storage-header">
                <span>Logs Preview</span>
                <span id="logger-preview-count">0</span>
              </div>
              <div class="iq-preview-shell">
                <div class="iq-preview-toolbar">
                  <span class="iq-preview-label">json</span>
                  <div class="logger-toolbar-actions">
                    <button
                      id="logger-toggle"
                      class="logger-toggle"
                      type="button"
                    >
                      Show all
                    </button>
                    <button
                      id="logger-clear"
                      class="logger-toggle"
                      type="button"
                    >
                      Clear Logs
                    </button>
                    <button id="logger-copy" class="iq-copy" type="button">
                      <span class="iq-copy-icon" aria-hidden="true">
                        <svg
                          viewBox="0 0 20 20"
                          aria-hidden="true"
                          focusable="false"
                        >
                          <mask
                            id="copy-cutout-logger"
                            maskUnits="userSpaceOnUse"
                          >
                            <rect
                              x="0"
                              y="0"
                              width="20"
                              height="20"
                              fill="white"
                            ></rect>
                            <rect
                              x="6"
                              y="6"
                              width="11"
                              height="11"
                              rx="2"
                              fill="black"
                            ></rect>
                          </mask>
                          <rect
                            x="2.5"
                            y="2.5"
                            width="10"
                            height="10"
                            rx="2"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linejoin="round"
                            stroke-linecap="round"
                            mask="url(#copy-cutout-logger)"
                          ></rect>
                          <rect
                            x="6.5"
                            y="6.5"
                            width="10"
                            height="10"
                            rx="2"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linejoin="round"
                            stroke-linecap="round"
                          ></rect>
                        </svg>
                      </span>
                      <span class="iq-check" aria-hidden="true">
                        <svg
                          viewBox="0 0 12 10"
                          aria-hidden="true"
                          focusable="false"
                        >
                          <path
                            d="M1 5.5 L4.5 9 L11 1.5"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="square"
                            stroke-linejoin="miter"
                          ></path>
                        </svg>
                      </span>
                      <span class="iq-copy-text">Copy</span>
                    </button>
                  </div>
                </div>
                <pre
                  id="logger-preview"
                  class="storage-value logger-preview"
                ></pre>
              </div>
            </div>
          </div>
        </section>

        <section id="feature-session" class="feature-section" role="tabpanel">
          <div class="status">Session Viewer is coming soon.</div>
        </section>

        <section id="feature-rules" class="feature-section" role="tabpanel">
          <div class="status">Load Rules tooling is coming soon.</div>
        </section>

        <section id="feature-payloads" class="feature-section" role="tabpanel">
          <div class="status">Payload Lab is coming soon.</div>
        </section>

        <section id="feature-iq" class="feature-section" role="tabpanel">
          <div class="iq-form">
            <div class="panel-section">
              <div class="panel-section-title has-toggle">
                <span class="panel-section-title-text"
                  >Step 1<span>Get Token</span></span
                >
                <button
                  class="section-toggle"
                  type="button"
                  data-section="iq-step-1"
                  aria-expanded="true"
                  aria-label="Toggle Step 1"
                >
                  <span class="section-toggle-icon" aria-hidden="true">‚ñæ</span>
                </button>
              </div>
              <div class="panel-section-body" data-section-body="iq-step-1">
                <label class="field">
                  <span>Account</span>
                  <input
                    id="iq-account"
                    type="text"
                    placeholder="success-nathan-schrader"
                  />
                </label>
                <label class="field">
                  <span>Profile</span>
                  <input id="iq-profile" type="text" placeholder="main" />
                </label>
                <label class="field">
                  <span>Username</span>
                  <input
                    id="iq-username"
                    type="text"
                    placeholder="user@example.com"
                  />
                </label>
                <label class="field">
                  <span>API Key</span>
                  <input id="iq-key" type="password" placeholder="API key" />
                </label>
                <div class="iq-actions">
                  <button id="iq-auth" class="storage-button" type="button">
                    <span class="btn-label">Get Token</span>
                    <span class="btn-spinner" aria-hidden="true"></span>
                  </button>
                </div>
                <label class="field">
                  <span>Token</span>
                  <input
                    id="iq-token"
                    type="password"
                    placeholder="Paste token to reuse"
                  />
                </label>
                <label class="field">
                  <span>Host</span>
                  <input
                    id="iq-host"
                    type="text"
                    placeholder="us-west-2-platform.tealiumapis.com"
                  />
                </label>
                <div class="storage-group">
                  <div class="storage-header">
                    <span>Recent Clients</span>
                    <span id="iq-recent-count">0</span>
                  </div>
                  <div id="iq-recent-list" class="iq-recent-list"></div>
                </div>
              </div>
            </div>
            <div class="panel-section">
              <div class="panel-section-title has-toggle">
                <span class="panel-section-title-text"
                  >Step 2<span>Fetch Profile</span></span
                >
                <button
                  class="section-toggle"
                  type="button"
                  data-section="iq-step-2"
                  aria-expanded="true"
                  aria-label="Toggle Step 2"
                >
                  <span class="section-toggle-icon" aria-hidden="true">‚ñæ</span>
                </button>
              </div>
              <div class="panel-section-body" data-section-body="iq-step-2">
                <div class="iq-includes">
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="loadRules"
                      checked
                    />
                    loadRules</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="tags"
                      checked
                    />
                    tags</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="tags.templateList"
                    />
                    tags.templateList</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="tags.template"
                    />
                    tags.template</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="extensions"
                      checked
                    />
                    extensions</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="variables"
                      checked
                    />
                    variables</label
                  >
                  <label class="export-option"
                    ><input type="checkbox" class="iq-include" value="events" />
                    events</label
                  >
                  <label class="export-option"
                    ><input
                      type="checkbox"
                      class="iq-include"
                      value="versionIDs"
                    />
                    versionIDs</label
                  >
                </div>
                <label class="field">
                  <span>Custom includes (comma separated)</span>
                  <input
                    id="iq-includes-custom"
                    type="text"
                    placeholder="loadRules, tags.templateList"
                  />
                </label>
                <div class="iq-actions">
                  <button id="iq-fetch" class="storage-button" type="button">
                    <span class="btn-label">Fetch iQ Profile</span>
                    <span class="btn-spinner" aria-hidden="true"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div id="iq-status" class="status">No profile fetched yet.</div>
          <div id="iq-meta-section" class="panel-section" hidden>
            <div class="panel-section-title">
              <span>Snapshot</span><span>Request</span>
            </div>
            <div id="iq-meta" class="iq-meta">
              <div id="iq-meta-url" class="iq-meta-url"></div>
              <div id="iq-meta-time" class="iq-meta-time"></div>
            </div>
          </div>
          <div class="storage-group">
            <div class="storage-header">
              <span>Profile Preview</span>
              <span id="iq-preview-count">0</span>
            </div>
            <div class="iq-preview-shell">
              <div class="iq-preview-toolbar">
                <span class="iq-preview-label">json</span>
                <button id="iq-copy" class="iq-copy" type="button">
                  <span class="iq-copy-icon" aria-hidden="true">
                    <svg
                      viewBox="0 0 20 20"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <mask id="copy-cutout" maskUnits="userSpaceOnUse">
                        <rect
                          x="0"
                          y="0"
                          width="20"
                          height="20"
                          fill="white"
                        ></rect>
                        <rect
                          x="6"
                          y="6"
                          width="11"
                          height="11"
                          rx="2.5"
                          fill="black"
                        ></rect>
                      </mask>
                      <rect
                        x="2.5"
                        y="2.5"
                        width="10"
                        height="10"
                        rx="2"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        mask="url(#copy-cutout)"
                      ></rect>
                      <rect
                        x="6.5"
                        y="6.5"
                        width="10"
                        height="10"
                        rx="2"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                      ></rect>
                    </svg>
                  </span>
                  <span class="iq-check" aria-hidden="true">
                    <svg
                      viewBox="0 0 12 10"
                      aria-hidden="true"
                      focusable="false"
                    >
                      <path
                        d="M1 5.5 L4.5 9 L11 1.5"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="square"
                        stroke-linejoin="miter"
                      ></path>
                    </svg>
                  </span>
                  <span class="iq-copy-text">Copy</span>
                </button>
              </div>
              <pre id="iq-preview" class="storage-value iq-preview"></pre>
            </div>
          </div>
        </section>

        <section id="feature-consent" class="feature-section" role="tabpanel">
          <div class="consent-controls">
            <div id="consent-meta" class="consent-meta"></div>
            <button id="consent-refresh" class="storage-button" type="button">
              Refresh
            </button>
          </div>
          <div id="consent-status" class="status">No snapshot yet.</div>

          <div class="storage-group">
            <div class="storage-header">
              <span>Consent Summary</span>
            </div>
            <div class="consent-summary">
            <div class="consent-row-group">
              <div class="consent-row">
                <span>Regulatory Model</span>
                <span id="consent-regulatory" class="consent-pill">Unknown</span>
              </div>
              <div id="consent-regulatory-sources" class="consent-subitems"></div>
            </div>
            <div class="consent-row-group">
              <div class="consent-row">
                <span>CMP Detected</span>
                <span id="consent-required" class="consent-pill">Unknown</span>
              </div>
              <div id="consent-cmps" class="consent-subitems"></div>
            </div>
            <div class="consent-row-group">
              <div class="consent-row">
                <span>Consent Data Stored</span>
                <span id="consent-present" class="consent-pill">Unknown</span>
              </div>
              <div id="consent-sources" class="consent-subitems"></div>
            </div>
            <div class="consent-row-group">
              <div class="consent-row">
                <span>GPC Signal</span>
                <span id="consent-gpc" class="consent-pill">Unknown</span>
              </div>
              <div id="consent-gpc-sources" class="consent-subitems"></div>
            </div>
            <div class="consent-row-group">
              <div class="consent-row">
                <span>Consent State</span>
                <div id="consent-state"></div>
              </div>
              <div id="consent-categories" class="consent-subitems"></div>
            </div>
            </div>
          </div>

          <div class="storage-group">
            <div class="storage-header">
              <span>Signals</span>
              <span id="consent-signal-count">0</span>
            </div>
            <div id="consent-signal-list" class="storage-list"></div>
          </div>
        </section>

        <section id="feature-network" class="feature-section" role="tabpanel">
          <div class="status">Network Watch is coming soon.</div>
        </section>

        <section id="feature-events" class="feature-section" role="tabpanel">
          <div class="status">Event Stream is coming soon.</div>
        </section>

        <section id="feature-storage" class="feature-section" role="tabpanel">
          <div class="storage-controls">
            <button id="storage-snapshot" class="storage-button" type="button">
              Snapshot
            </button>
            <label class="storage-search">
              <input
                id="storage-search"
                type="text"
                placeholder="Filter keys/values"
              />
            </label>
          </div>
          <div id="storage-status" class="status">No snapshot yet.</div>

          <div class="storage-group">
            <div class="storage-header">
              <span>Cookies</span>
              <span id="storage-cookies-count">0</span>
            </div>
            <div id="storage-cookies-list" class="storage-list"></div>
          </div>

          <div class="storage-group">
            <div class="storage-header">
              <span>Local Storage</span>
              <span id="storage-local-count">0</span>
            </div>
            <div id="storage-local-list" class="storage-list"></div>
          </div>

          <div class="storage-group">
            <div class="storage-header">
              <span>Session Storage</span>
              <span id="storage-session-count">0</span>
            </div>
            <div id="storage-session-list" class="storage-list"></div>
          </div>

          <div class="storage-group">
            <div class="storage-header">
              <span>utag.data</span>
              <span id="storage-utag-count">0</span>
            </div>
            <div id="storage-utag-list" class="storage-list"></div>
          </div>
        </section>

        <section id="feature-qa" class="feature-section" role="tabpanel">
          <div class="status">QA Checklist is coming soon.</div>
        </section>
      </div>

      <div
        id="export-view"
        class="feature-section"
        role="tabpanel"
        aria-hidden="true"
      >
        <div class="export-sections">
          <div class="panel-section export-section">
            <div class="panel-section-title">
              <span>Case File</span><span>Contents</span>
            </div>
            <div class="export-options">
              <div class="export-option-group">
                <div class="export-subtitle">Include</div>
                <div class="export-option-grid">
                  <label class="export-option">
                    <input id="export-include-logger" type="checkbox" checked />
                    <span>Include utag.DB</span>
                  </label>
                  <label class="export-option">
                    <input
                      id="export-include-consent"
                      type="checkbox"
                      checked
                    />
                    <span>Include Consent</span>
                  </label>
                  <label class="export-option">
                    <input id="export-include-iq" type="checkbox" checked />
                    <span>Include iQ Profile</span>
                  </label>
                </div>
              </div>
              <div class="export-option-group">
                <div class="export-subtitle">Redact</div>
                <div class="export-option-grid">
                  <label class="export-option">
                    <input id="export-redact-urls" type="checkbox" />
                    <span>Redact URLs</span>
                  </label>
                  <label class="export-option">
                    <input id="export-redact-signals" type="checkbox" />
                    <span>Redact signal values</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="storage-controls">
              <button id="export-download" class="storage-button" type="button">
                Export Case File
              </button>
            </div>
          </div>
        </div>
        <div class="storage-group">
          <div class="storage-header">
            <span>Case File Preview</span>
            <button id="export-refresh" class="storage-button" type="button">
              Refresh Preview
            </button>
          </div>
          <div id="export-status-inline" class="export-status-inline">
            No preview yet.
          </div>
          <div id="export-size" class="export-size"></div>
          <div class="iq-preview-shell">
            <div class="iq-preview-toolbar">
              <span class="iq-preview-label">json</span>
              <button id="export-copy" class="iq-copy" type="button">
                <span class="iq-copy-icon" aria-hidden="true">
                  <svg viewBox="0 0 20 20" aria-hidden="true" focusable="false">
                    <mask id="copy-cutout-export" maskUnits="userSpaceOnUse">
                      <rect
                        x="0"
                        y="0"
                        width="20"
                        height="20"
                        fill="white"
                      ></rect>
                      <rect
                        x="6"
                        y="6"
                        width="11"
                        height="11"
                        rx="2"
                        fill="black"
                      ></rect>
                    </mask>
                    <rect
                      x="2.5"
                      y="2.5"
                      width="10"
                      height="10"
                      rx="2"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linejoin="round"
                      stroke-linecap="round"
                      mask="url(#copy-cutout-export)"
                    ></rect>
                    <rect
                      x="6.5"
                      y="6.5"
                      width="10"
                      height="10"
                      rx="2"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linejoin="round"
                      stroke-linecap="round"
                    ></rect>
                  </svg>
                </span>
                <span class="iq-check" aria-hidden="true">
                  <svg viewBox="0 0 12 10" aria-hidden="true" focusable="false">
                    <path
                      d="M1 5.5 L4.5 9 L11 1.5"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="1.5"
                      stroke-linecap="square"
                      stroke-linejoin="miter"
                    ></path>
                  </svg>
                </span>
                <span class="iq-copy-text">Copy</span>
              </button>
            </div>
            <pre id="export-preview" class="storage-value export-preview"></pre>
          </div>
        </div>
      </div>
      <div
        id="recent-view"
        class="feature-section"
        role="tabpanel"
        aria-hidden="true"
      >
        <div class="status" id="recent-status">No exports yet.</div>
        <div id="recent-list" class="recent-list"></div>
      </div>
    </div>
    <script src="sidepanel.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
